[toc]
# Dynamic Programming
## DAG中的最短路
$$\text{dist}[i]=\min_{j:(j,i)\in E}\left\{\text{dist}[j]+l(j,i)\right\}$$
## 最长上升子序列
$F[k]$ 为以 $a[k]$ 结尾的最长的上升子序列
$$F[k]=\max_{i\in[0,k-1]\&a[i]<a[k]}\{F[i]\}+1$$
![](./img4/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202022-06-11%20175030.png)
$$O(n^2)$$一维线性问题
## 编辑距离
Edit distance
![](./img4/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202022-06-11%20181307.png)
![](./img4/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202022-06-11%20181545.png)
## 背包问题
Knapsack
1. **可以重复用**
![](./img4/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202022-06-11%20182810.png)
$$O(n\cdot W)$$
2. **不能重复用**
![](./img4/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202022-06-11%20183130.png)
## 矩阵链乘法
Chain Matrix multiplication
$$M_1\cdot M_2\cdot\cdots\cdot M_{n}\\
M_i \text{ is matrix }(m_{i-1},m_i)$$
通过表达式树枚举当前层的乘号位置
![](./img4/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202022-06-11%20203615.png)
$$F(i,j)=\min_{k\in [i,j-1]}\left\{F(i,k)+F(k,j)+m_{i-1} m_k m_j\right\}\\
F(i,i)=0$$
## 用 DP 算一般图上的最短路
最后得到的就是 Bellman-Ford 算法
![](./img4/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202022-06-11%20204459.png)
$$O(m\cdot n)$$
## Floyd-Warshall
![](./img4/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202022-06-11%20205638.png)
![](./img4/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202022-06-11%20205606.png)
## TSP
![](./img4/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202022-06-11%20211105.png)
## DP on trees
### Max Independent Set
独立集S中任意两个点之间没有连边
一般图上是 NP-hard
![](./img4/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202022-06-11%20212542.png)
#### __
![](./img4/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202022-06-11%20213552.png)
## 状态压缩
![](./img4/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202022-06-11%20214113.png)
(国际象棋国王攻击范围是它周围8格)
## 利用决策的单调性，减少状态转移时需要循环的状态数
(上课提到的公司剔除又老又菜的员工问题)
找数列的第 $i$ 个位置往前 $k$ 个位置之内最大的数。
- 大小为 $k$ 的优先级队列 $O(n\log k)$
- 用双向队列，每次都删除队头元素，并且删除队尾元素直至队尾元素大于“新人”，然后新人入队尾 $O(n)$

## 最长上升子序列的$O(n\log n)$算法
![](./img4/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202022-06-11%20221352.png)